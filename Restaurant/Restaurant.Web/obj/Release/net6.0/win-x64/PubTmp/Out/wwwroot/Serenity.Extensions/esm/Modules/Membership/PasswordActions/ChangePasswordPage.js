import{a as f,b as r}from"../../../_chunks/chunk-XSC53KUD.js";import{c as o,e as d,g as m}from"../../../_chunks/chunk-ATNGMF2N.js";var c=d(m(),1),t=d(m(),1);var s=d(m(),1);var a=class extends s.PrefixedContext{constructor(u){if(super(u),!a.init){a.init=!0;var e=s.PasswordEditor;(0,s.initFormType)(a,["OldPassword",e,"NewPassword",e,"ConfirmPassword",e])}}},i=a;o(i,"ChangePasswordForm"),i.formKey="Serenity.Extensions.ChangePasswordRequest";function w(){new n($("#PanelDiv").addClass("s-container-tight mt-5 s-Form"))}o(w,"pageInit");var l=f.Forms.Membership.ChangePassword,n=class extends c.PropertyPanel{constructor(e){super(e);this.form=new i(this.idPrefix);this.form.NewPassword.addValidationRule(this.uniqueName,()=>{if(this.form.NewPassword.value.length<7)return(0,t.format)((0,t.localText)("Validation.MinRequiredPasswordLength"),7)}),this.form.ConfirmPassword.addValidationRule(this.uniqueName,()=>{if(this.form.ConfirmPassword.value!==this.form.NewPassword.value)return(0,t.localText)("Validation.PasswordConfirmMismatch")})}getFormKey(){return i.formKey}submitClick(){if(this.validateForm()){var e=this.getSaveEntity();(0,t.serviceCall)({url:(0,t.resolveUrl)("~/Account/ChangePassword"),request:e,onSuccess:()=>{(0,t.informationDialog)(l.Success,()=>{window.location.href=(0,t.resolveUrl)("~/")})}})}}renderContents(){let e=this.useIdPrefix();this.element.empty().append(r("div",{class:"s-Panel",children:[r("h3",{class:"page-title mb-4 text-center",children:l.FormTitle}),r("form",{id:e.Form,action:"",children:[r("div",{id:e.PropertyGrid}),r("div",{class:"px-field mt-4",children:r("button",{id:e.SubmitButton,type:"submit",class:"btn btn-primary w-100",onClick:p=>{p.preventDefault(),this.submitClick()},children:l.SubmitButton})})]})]}))}};o(n,"ChangePasswordPanel");export{w as default};
//# sourceMappingURL=ChangePasswordPage.js.map
