import{a as w}from"../../../_chunks/chunk-3BQG6TCK.js";import{a as d,b as e}from"../../../_chunks/chunk-XSC53KUD.js";import{c as n,e as u,g as l}from"../../../_chunks/chunk-ATNGMF2N.js";var i=u(l(),1);var a=class extends i.PrefixedContext{constructor(p){if(super(p),!a.init){a.init=!0;var t=i.PasswordEditor;(0,i.initFormType)(a,["NewPassword",t,"ConfirmPassword",t])}}},o=a;n(o,"ResetPasswordForm"),o.formKey="Serenity.Extensions.ResetPasswordRequest";var P=u(l(),1),s=u(l(),1);function v(c){new m($("#PanelDiv").addClass("s-full-page justify-content-center s-Form"),c)}n(v,"pageInit");var f=d.Forms.Membership.ResetPassword,m=class extends P.PropertyPanel{constructor(t,r){super(t,r);this.form=new o(this.idPrefix);this.form.NewPassword.addValidationRule(this.uniqueName,h=>{if(this.form.NewPassword.value.length<this.options.minPasswordLength)return(0,s.format)(d.Validation.MinRequiredPasswordLength,this.options.minPasswordLength)}),this.form.ConfirmPassword.addValidationRule(this.uniqueName,h=>{if(this.form.ConfirmPassword.value!==this.form.NewPassword.value)return d.Validation.PasswordConfirmMismatch})}getFormKey(){return o.formKey}submitClick(){if(this.validateForm()){var t=this.getSaveEntity();t.Token=this.byId("Token").val(),(0,s.serviceCall)({url:(0,s.resolveUrl)("~/Account/ResetPassword"),request:t,onSuccess:r=>{r.RedirectHome?window.location.href=(0,s.resolveUrl)("~/"):(0,s.informationDialog)(f.Success,()=>{window.location.href=(0,s.resolveUrl)("~/Account/Login")})}})}}renderContents(){let t=this.useIdPrefix();this.element.empty().append(e("div",{class:"s-container-tight",children:[e(w,{}),e("div",{class:"s-Panel p-4",children:[e("h5",{class:"text-center mb-4",children:f.FormTitle}),e("form",{id:t.Form,action:"",children:[e("div",{id:t.PropertyGrid}),e("button",{id:t.SubmitButton,type:"submit",class:"btn btn-primary mx-8 w-100",onClick:r=>{r.preventDefault(),this.submitClick()},children:f.SubmitButton}),e("input",{type:"hidden",id:t.Token,value:this.options.token})]})]})]}))}};n(m,"ResetPasswordPanel");export{m as ResetPasswordPanel,v as default};
//# sourceMappingURL=ResetPasswordPage.js.map
